\doxysection{Io\+T-\/\+Core/i3\+\_\+log.h File Reference}
\hypertarget{i3__log_8h}{}\label{i3__log_8h}\index{IoT-\/Core/i3\_log.h@{IoT-\/Core/i3\_log.h}}


Public API to the i3\+\_\+log module. By convention the functions here are documented with their source in the .c file.  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include "{}reach-\/server.\+h"{}}\newline
{\ttfamily \#include "{}i3\+\_\+error.\+h"{}}\newline
{\ttfamily \#include "{}text\+\_\+colors.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{i3__log_8h_a4acce57b336ea13e74e65c756d9ccb52}{LOG\+\_\+\+MASK\+\_\+\+ALWAYS}}~0x01
\begin{DoxyCompactList}\small\item\em The lowest nibble is reserved to system things. \end{DoxyCompactList}\item 
\Hypertarget{i3__log_8h_ada906a8d411f28695e5ad71e65927916}\label{i3__log_8h_ada906a8d411f28695e5ad71e65927916} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+ERROR}~0x02
\item 
\Hypertarget{i3__log_8h_a62e366d1bd8bc1ad623cda9ac2cff522}\label{i3__log_8h_a62e366d1bd8bc1ad623cda9ac2cff522} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+WARN}~0x04
\item 
\Hypertarget{i3__log_8h_a410ecc58275b44043479a1f7af35fe7b}\label{i3__log_8h_a410ecc58275b44043479a1f7af35fe7b} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+BARE}~0x08
\item 
\Hypertarget{i3__log_8h_a14148239a536628efcbc2a39beeaed12}\label{i3__log_8h_a14148239a536628efcbc2a39beeaed12} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+REMOTE}~0x10
\item 
\Hypertarget{i3__log_8h_ade35013528561f271e548653520cdd54}\label{i3__log_8h_ade35013528561f271e548653520cdd54} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+WEAK}~0x20
\begin{DoxyCompactList}\small\item\em These used by Reach features. Enable them to debug and understand. \end{DoxyCompactList}\item 
\Hypertarget{i3__log_8h_a1fdd582c34d7430aed06079ce7ef1466}\label{i3__log_8h_a1fdd582c34d7430aed06079ce7ef1466} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+WIRE}~0x40
\item 
\Hypertarget{i3__log_8h_af45f5a1cb3c8f281fae946908e29ec1c}\label{i3__log_8h_af45f5a1cb3c8f281fae946908e29ec1c} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+REACH}~0x80
\item 
\Hypertarget{i3__log_8h_aae4b2a7b74d3a6217e17e259e517ace4}\label{i3__log_8h_aae4b2a7b74d3a6217e17e259e517ace4} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+PARAMS}~0x100
\item 
\Hypertarget{i3__log_8h_a28caa7b8e445caba9b76ae8633d413ef}\label{i3__log_8h_a28caa7b8e445caba9b76ae8633d413ef} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+FILES}~0x200
\item 
\Hypertarget{i3__log_8h_a50e2c002d06ddfb14339129a818c5440}\label{i3__log_8h_a50e2c002d06ddfb14339129a818c5440} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+BLE}~0x400
\item 
\Hypertarget{i3__log_8h_abf0933796628153d01c800dcb8383c3e}\label{i3__log_8h_abf0933796628153d01c800dcb8383c3e} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+ACME}~0x4000
\item 
\Hypertarget{i3__log_8h_a61d37369cb5bacacfb9e37016a55338f}\label{i3__log_8h_a61d37369cb5bacacfb9e37016a55338f} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+DEBUG}~0x8000
\item 
\Hypertarget{i3__log_8h_ab0957ed1c2c5d9a0f01c6def6c17f201}\label{i3__log_8h_ab0957ed1c2c5d9a0f01c6def6c17f201} 
\#define {\bfseries LOG\+\_\+\+MASK\+\_\+\+TIMEOUT}~0x10000
\item 
\#define \mbox{\hyperlink{i3__log_8h_a77e685badbf7a45c979cee037308dd70}{I3\+\_\+\+LOG}}(m,  f, ...)~i3\+\_\+log(m, f, \#\#\+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+)
\item 
\Hypertarget{i3__log_8h_a950d15a69555c9c763a35a1af5d6a6db}\label{i3__log_8h_a950d15a69555c9c763a35a1af5d6a6db} 
\#define {\bfseries LOG\+\_\+\+REACH}(format, ...)~        \mbox{\hyperlink{i3__log_8h_a77e685badbf7a45c979cee037308dd70}{I3\+\_\+\+LOG}}(LOG\+\_\+\+MASK\+\_\+\+REACH, "{}\mbox{[}\%s\mbox{]}\mbox{[}\%s\mbox{]} "{} format, \+\_\+\+\_\+\+FILE\+\_\+\+\_\+, \+\_\+\+\_\+func\+\_\+\+\_\+, \#\#\+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+)
\item 
\Hypertarget{i3__log_8h_abffaf9cecb61026cac6db71a16ace9c5}\label{i3__log_8h_abffaf9cecb61026cac6db71a16ace9c5} 
\#define {\bfseries LOG\+\_\+\+ERROR}(format, ...)~        i3\+\_\+log(LOG\+\_\+\+MASK\+\_\+\+ERROR, "{}\mbox{[}\%s\mbox{]}\mbox{[}\%s\mbox{]} "{} format, \+\_\+\+\_\+\+FILE\+\_\+\+\_\+, \+\_\+\+\_\+func\+\_\+\+\_\+, \#\#\+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+)
\item 
\Hypertarget{i3__log_8h_ab1bf0f4dbecde6dc28f25b33e841ce5a}\label{i3__log_8h_ab1bf0f4dbecde6dc28f25b33e841ce5a} 
\#define {\bfseries LOG\+\_\+\+DUMP\+\_\+\+WIRE}(banner,  buf,  len)~        \mbox{\hyperlink{i3__log_8c_ab3883f9a81eebb62b08ba9b2d69454ef}{i3\+\_\+log\+\_\+dump\+\_\+buffer}}(LOG\+\_\+\+MASK\+\_\+\+WIRE, banner, buf, len)
\item 
\Hypertarget{i3__log_8h_a2a78431fdae40efcaf2a1b091659b7ed}\label{i3__log_8h_a2a78431fdae40efcaf2a1b091659b7ed} 
\#define {\bfseries LOG\+\_\+\+DUMP\+\_\+\+MASK}(mask,  banner,  buf,  len)~        \mbox{\hyperlink{i3__log_8c_ab3883f9a81eebb62b08ba9b2d69454ef}{i3\+\_\+log\+\_\+dump\+\_\+buffer}}(mask, banner, buf, len)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{i3__log_8h_a7158b49c3856e138394fa544b7622cd8}{i3\+\_\+log\+\_\+set\+\_\+mask}} (uint32\+\_\+t mask)
\begin{DoxyCompactList}\small\item\em i3\+\_\+log\+\_\+set\+\_\+mask \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{i3__log_8h_a387ee42dbbeaa80a5e522aa5324838e2}{i3\+\_\+log\+\_\+get\+\_\+mask}} (void)
\begin{DoxyCompactList}\small\item\em i3\+\_\+log\+\_\+set\+\_\+mask \end{DoxyCompactList}\item 
int \mbox{\hyperlink{i3__log_8h_a5144ed020d32290b50db3d2c38ae4256}{i3\+\_\+log\+\_\+set\+\_\+remote\+\_\+cli\+\_\+enable}} (bool enable)
\item 
\Hypertarget{i3__log_8h_a9f67a1e068b42bc8e103853758a55794}\label{i3__log_8h_a9f67a1e068b42bc8e103853758a55794} 
bool {\bfseries i3\+\_\+log\+\_\+get\+\_\+remote\+\_\+cli\+\_\+enable} ()
\item 
\Hypertarget{i3__log_8h_a850a0891ec0b739f0f4da33b69afc3f5}\label{i3__log_8h_a850a0891ec0b739f0f4da33b69afc3f5} 
int {\bfseries i3\+\_\+log\+\_\+get\+\_\+remote\+\_\+buffer} (char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}p\+Rcli)
\item 
\Hypertarget{i3__log_8h_adfc040fe87e98e8388c3f5758ea4e628}\label{i3__log_8h_adfc040fe87e98e8388c3f5758ea4e628} 
void {\bfseries i3\+\_\+log} (const uint32\+\_\+t mask, const char \texorpdfstring{$\ast$}{*}fmt,...)
\item 
void \mbox{\hyperlink{i3__log_8h_ab3883f9a81eebb62b08ba9b2d69454ef}{i3\+\_\+log\+\_\+dump\+\_\+buffer}} (const uint32\+\_\+t mask, const char \texorpdfstring{$\ast$}{*}banner, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}ptr, const size\+\_\+t len)
\begin{DoxyCompactList}\small\item\em i3\+\_\+log\+\_\+dump\+\_\+buffer \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Public API to the i3\+\_\+log module. By convention the functions here are documented with their source in the .c file. 

\begin{DoxyCopyright}{Copyright}
(c) Copyright 2023 i3 Product Development. All Rights Reserved. The Cygngus Reach firmware stack is shared under an MIT license. 
\end{DoxyCopyright}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{i3__log_8h_a77e685badbf7a45c979cee037308dd70}\label{i3__log_8h_a77e685badbf7a45c979cee037308dd70} 
\index{i3\_log.h@{i3\_log.h}!I3\_LOG@{I3\_LOG}}
\index{I3\_LOG@{I3\_LOG}!i3\_log.h@{i3\_log.h}}
\doxysubsubsection{\texorpdfstring{I3\_LOG}{I3\_LOG}}
{\footnotesize\ttfamily \#define I3\+\_\+\+LOG(\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{f,  }\item[{}]{... }\end{DoxyParamCaption})~i3\+\_\+log(m, f, \#\#\+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+)}

Higher bits can be defined and used by the application \#include "{}app\+\_\+log\+\_\+masks.\+h"{} Logging can be completely excluded from the build by defining NO\+\_\+\+REACH\+\_\+\+LOGGING in reach-\/server.\+h. \Hypertarget{i3__log_8h_a4acce57b336ea13e74e65c756d9ccb52}\label{i3__log_8h_a4acce57b336ea13e74e65c756d9ccb52} 
\index{i3\_log.h@{i3\_log.h}!LOG\_MASK\_ALWAYS@{LOG\_MASK\_ALWAYS}}
\index{LOG\_MASK\_ALWAYS@{LOG\_MASK\_ALWAYS}!i3\_log.h@{i3\_log.h}}
\doxysubsubsection{\texorpdfstring{LOG\_MASK\_ALWAYS}{LOG\_MASK\_ALWAYS}}
{\footnotesize\ttfamily \#define LOG\+\_\+\+MASK\+\_\+\+ALWAYS~0x01}



The lowest nibble is reserved to system things. 

The logging system used by Reach relies on a "{}mask"{} to control the amount of logging. The "{}mask"{} concept here is chosen over the "{}level"{} concept so that masks can be assigned to specific features. Turning on all of the masks is likely to be too much information. You can turn on the logging from only the modules that you want to debug. Reach uses a few bits. You can assign your own bits. 

\doxysubsection{Function Documentation}
\Hypertarget{i3__log_8h_ab3883f9a81eebb62b08ba9b2d69454ef}\label{i3__log_8h_ab3883f9a81eebb62b08ba9b2d69454ef} 
\index{i3\_log.h@{i3\_log.h}!i3\_log\_dump\_buffer@{i3\_log\_dump\_buffer}}
\index{i3\_log\_dump\_buffer@{i3\_log\_dump\_buffer}!i3\_log.h@{i3\_log.h}}
\doxysubsubsection{\texorpdfstring{i3\_log\_dump\_buffer()}{i3\_log\_dump\_buffer()}}
{\footnotesize\ttfamily void i3\+\_\+log\+\_\+dump\+\_\+buffer (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{mask,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{banner,  }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{ptr,  }\item[{const size\+\_\+t}]{len }\end{DoxyParamCaption})}



i3\+\_\+log\+\_\+dump\+\_\+buffer 

Directly uses printf to produce a hex dump of a buffer. Used to view the contents of coded buffers sent and received. \begin{DoxyNote}{Note}
The buffer is dumped locally, and not remotely. The width of the dump is set by the DUMP\+\_\+\+WIDTH defined just above this function. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em mask} & Enable or disable using the log module\textquotesingle{}s mask feature.. \\
\hline
{\em banner} & A header to be displayed describing the hex dump. \\
\hline
{\em ptr} & A buffer of bytes to be displayed. \\
\hline
{\em len} & The number of bytes to be displayed.. \\
\hline
\end{DoxyParams}
\Hypertarget{i3__log_8h_a387ee42dbbeaa80a5e522aa5324838e2}\label{i3__log_8h_a387ee42dbbeaa80a5e522aa5324838e2} 
\index{i3\_log.h@{i3\_log.h}!i3\_log\_get\_mask@{i3\_log\_get\_mask}}
\index{i3\_log\_get\_mask@{i3\_log\_get\_mask}!i3\_log.h@{i3\_log.h}}
\doxysubsubsection{\texorpdfstring{i3\_log\_get\_mask()}{i3\_log\_get\_mask()}}
{\footnotesize\ttfamily uint32\+\_\+t i3\+\_\+log\+\_\+get\+\_\+mask (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



i3\+\_\+log\+\_\+set\+\_\+mask 

Gets the mask which determines whether or not a log statement generates output. See defines starting with LOG\+\_\+\+MASK\+\_\+. \Hypertarget{i3__log_8h_a7158b49c3856e138394fa544b7622cd8}\label{i3__log_8h_a7158b49c3856e138394fa544b7622cd8} 
\index{i3\_log.h@{i3\_log.h}!i3\_log\_set\_mask@{i3\_log\_set\_mask}}
\index{i3\_log\_set\_mask@{i3\_log\_set\_mask}!i3\_log.h@{i3\_log.h}}
\doxysubsubsection{\texorpdfstring{i3\_log\_set\_mask()}{i3\_log\_set\_mask()}}
{\footnotesize\ttfamily void i3\+\_\+log\+\_\+set\+\_\+mask (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{mask }\end{DoxyParamCaption})}



i3\+\_\+log\+\_\+set\+\_\+mask 

Sets the mask which determines whether or not a log statement generates output. See defines starting with LOG\+\_\+\+MASK\+\_\+. \Hypertarget{i3__log_8h_a5144ed020d32290b50db3d2c38ae4256}\label{i3__log_8h_a5144ed020d32290b50db3d2c38ae4256} 
\index{i3\_log.h@{i3\_log.h}!i3\_log\_set\_remote\_cli\_enable@{i3\_log\_set\_remote\_cli\_enable}}
\index{i3\_log\_set\_remote\_cli\_enable@{i3\_log\_set\_remote\_cli\_enable}!i3\_log.h@{i3\_log.h}}
\doxysubsubsection{\texorpdfstring{i3\_log\_set\_remote\_cli\_enable()}{i3\_log\_set\_remote\_cli\_enable()}}
{\footnotesize\ttfamily int i3\+\_\+log\+\_\+set\+\_\+remote\+\_\+cli\+\_\+enable (\begin{DoxyParamCaption}\item[{bool}]{enable }\end{DoxyParamCaption})}

The logging functions are simplified when INCLUDE\+\_\+\+CLI\+\_\+\+SERVICE is not defined. 